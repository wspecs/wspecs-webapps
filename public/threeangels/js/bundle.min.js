$("li.bi").each(function(){var e=$(this);e.find(".bkfr > div").css("background-color",$(this).data("color"));e.find(".bklf").css("background-color",$(this).data("color"));e.find(".bkc").css("background-color",$(this).data("color"));e.find(".item-details a.button").on("click",function(){displayBookDetails(e)})});function displayBookDetails(e){var t=$(e);$(".main-container").addClass("prevent-scroll");$(".main-overlay").fadeIn();t.find(".overlay-details").clone().prependTo(".main-overlay");$("a.close-overlay-btn").on("click",function(e){e.preventDefault();$(".main-container").removeClass("prevent-scroll");$(".main-overlay").fadeOut();$(".main-overlay").find(".overlay-details").remove()});$(".main-overlay a.back-preview-btn").on("click",function(){$(".main-overlay .overlay-desc").toggleClass("activated");$(".main-overlay .overlay-preview").toggleClass("activated")})}$(".main-navigation a").on("click",function(){$(".main-container").addClass("nav-menu-open");$(".main-overlay").fadeIn()});$(".overlay-full").on("click",function(){$(".main-container").removeClass("nav-menu-open");$(".main-container").removeClass("prevent-scroll");$(this).parent().fadeOut();$(this).parent().find(".overlay-details").remove()});var Shuffle=window.shuffle;var bookList=function(e){this.element=e;this.shuffle=new Shuffle(e,{itemSelector:".bi"});this._activeFilters=[];this.addFilterButtons();this.addSorting();this.addSearchFilter();this.mode="exclusive"};bookList.prototype.toArray=function(e){return Array.prototype.slice.call(e)};bookList.prototype.toggleMode=function(){if(this.mode==="additive"){this.mode="exclusive"}else{this.mode="additive"}};bookList.prototype.addFilterButtons=function(){var e=document.querySelector(".filter-options");if(!e){return}var t=this.toArray(e.children);t.forEach(function(e){e.addEventListener("click",this._handleFilterClick.bind(this),false)},this)};bookList.prototype._handleFilterClick=function(e){var t=e.currentTarget;var i=t.classList.contains("active");var a=t.getAttribute("data-group");if(this.mode==="additive"){if(i){this._activeFilters.splice(this._activeFilters.indexOf(a))}else{this._activeFilters.push(a)}t.classList.toggle("active");this.shuffle.filter(this._activeFilters)}else{this._removeActiveClassFromChildren(t.parentNode);var o;if(i){t.classList.remove("active");o=Shuffle.ALL_ITEMS}else{t.classList.add("active");o=a}this.shuffle.filter(o)}};bookList.prototype._removeActiveClassFromChildren=function(e){var t=e.children;for(var i=t.length-1;i>=0;i--){t[i].classList.remove("active")}};bookList.prototype.addSorting=function(){var e=document.querySelector(".sort-options");if(!e){return}e.addEventListener("change",this._handleSortChange.bind(this))};bookList.prototype._handleSortChange=function(e){var t=e.target.value;var i={};function a(e){return e.getAttribute("data-created")}function o(e){return e.getAttribute("data-title").toLowerCase()}if(t==="date-created"){i={reverse:true,by:a}}else if(t==="title"){i={by:o}}this.shuffle.sort(i)};bookList.prototype.addSearchFilter=function(){var e=document.querySelector(".shuffle-search");if(!e){return}e.addEventListener("keyup",this._handleSearchKeyup.bind(this))};bookList.prototype._handleSearchKeyup=function(e){var t=document.querySelector(".shuffle-search");var i=e.target.value.toLowerCase();if(t&&t.value){$(".catalog-search").addClass("input--filled")}else{$(".catalog-search").removeClass("input--filled")}this.shuffle.filter(function(e,t){if(t.group!==Shuffle.ALL_ITEMS){var a=JSON.parse(e.getAttribute("data-groups"));var o=a.indexOf(t.group)!==-1;if(!o){return false}}var r=e.querySelector(".bi_title");var n=r.textContent.toLowerCase().trim();return n.indexOf(i)!==-1})};document.addEventListener("DOMContentLoaded",function(){window.book_list=new bookList(document.getElementById("grid"))});$("li.bi").each(function(){var e=$(this);e.find(".bkfr > div").css("background-color",$(this).data("color"));e.find(".bklf").css("background-color",$(this).data("color"));e.find(".bkc").css("background-color",$(this).data("color"));e.find(".item-details a.button").on("click",function(){displayBookDetails(e)})});function displayBookDetails(e){var t=$(e);$(".main-container").addClass("prevent-scroll");$(".main-overlay").fadeIn();t.find(".overlay-details").clone().prependTo(".main-overlay");$("a.close-overlay-btn").on("click",function(e){e.preventDefault();$(".main-container").removeClass("prevent-scroll");$(".main-overlay").fadeOut();$(".main-overlay").find(".overlay-details").remove()});$(".main-overlay a.back-preview-btn").on("click",function(){$(".main-overlay .overlay-desc").toggleClass("activated");$(".main-overlay .overlay-preview").toggleClass("activated")})}$(".main-navigation a").on("click",function(){$(".main-container").addClass("nav-menu-open");$(".main-overlay").fadeIn()});$(".overlay-full").on("click",function(){$(".main-container").removeClass("nav-menu-open");$(".main-container").removeClass("prevent-scroll");$(this).parent().fadeOut();$(this).parent().find(".overlay-details").remove()});var Shuffle=window.shuffle;var bookList=function(e){this.element=e;this.shuffle=new Shuffle(e,{itemSelector:".bi"});this._activeFilters=[];this.addFilterButtons();this.addSorting();this.addSearchFilter();this.mode="exclusive"};bookList.prototype.toArray=function(e){return Array.prototype.slice.call(e)};bookList.prototype.toggleMode=function(){if(this.mode==="additive"){this.mode="exclusive"}else{this.mode="additive"}};bookList.prototype.addFilterButtons=function(){var e=document.querySelector(".filter-options");if(!e){return}var t=this.toArray(e.children);t.forEach(function(e){e.addEventListener("click",this._handleFilterClick.bind(this),false)},this)};bookList.prototype._handleFilterClick=function(e){var t=e.currentTarget;var i=t.classList.contains("active");var a=t.getAttribute("data-group");if(this.mode==="additive"){if(i){this._activeFilters.splice(this._activeFilters.indexOf(a))}else{this._activeFilters.push(a)}t.classList.toggle("active");this.shuffle.filter(this._activeFilters)}else{this._removeActiveClassFromChildren(t.parentNode);var o;if(i){t.classList.remove("active");o=Shuffle.ALL_ITEMS}else{t.classList.add("active");o=a}this.shuffle.filter(o)}};bookList.prototype._removeActiveClassFromChildren=function(e){var t=e.children;for(var i=t.length-1;i>=0;i--){t[i].classList.remove("active")}};bookList.prototype.addSorting=function(){var e=document.querySelector(".sort-options");if(!e){return}e.addEventListener("change",this._handleSortChange.bind(this))};bookList.prototype._handleSortChange=function(e){var t=e.target.value;var i={};function a(e){return e.getAttribute("data-created")}function o(e){return e.getAttribute("data-title").toLowerCase()}if(t==="date-created"){i={reverse:true,by:a}}else if(t==="title"){i={by:o}}this.shuffle.sort(i)};bookList.prototype.addSearchFilter=function(){var e=document.querySelector(".shuffle-search");if(!e){return}e.addEventListener("keyup",this._handleSearchKeyup.bind(this))};bookList.prototype._handleSearchKeyup=function(e){var t=document.querySelector(".shuffle-search");var i=e.target.value.toLowerCase();if(t&&t.value){$(".catalog-search").addClass("input--filled")}else{$(".catalog-search").removeClass("input--filled")}this.shuffle.filter(function(e,t){if(t.group!==Shuffle.ALL_ITEMS){var a=JSON.parse(e.getAttribute("data-groups"));var o=a.indexOf(t.group)!==-1;if(!o){return false}}var r=e.querySelector(".bi_title");var n=r.textContent.toLowerCase().trim();return n.indexOf(i)!==-1})};document.addEventListener("DOMContentLoaded",function(){window.book_list=new bookList(document.getElementById("grid"))});
